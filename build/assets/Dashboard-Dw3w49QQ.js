import{R as c,A as V,r as x,j as e}from"./index-CKztDtJy.js";import{a as S,b as A}from"./api-4LTkHDOH.js";import{C as I}from"./index-Bey2CDyB.js";import{S as $,T as M}from"./index-C3yXsqH-.js";import{B as W}from"./button-DLjvLRGX.js";import{R as U}from"./FilePdfOutlined-cois0AvM.js";import"./AntdIcon-D6PjId85.js";import"./index-hf0OX2Zc.js";import"./compact-item-BzXGub8O.js";const Y=c.createContext({}),P=!0;function G({baseColor:l,highlightColor:a,width:i,height:d,borderRadius:m,circle:N,direction:g,duration:p,enableAnimation:h=P,customHighlightBackground:r}){const o={};return g==="rtl"&&(o["--animation-direction"]="reverse"),typeof p=="number"&&(o["--animation-duration"]=`${p}s`),h||(o["--pseudo-element-display"]="none"),(typeof i=="string"||typeof i=="number")&&(o.width=i),(typeof d=="string"||typeof d=="number")&&(o.height=d),(typeof m=="string"||typeof m=="number")&&(o.borderRadius=m),N&&(o.borderRadius="50%"),typeof l<"u"&&(o["--base-color"]=l),typeof a<"u"&&(o["--highlight-color"]=a),typeof r=="string"&&(o["--custom-highlight-background"]=r),o}function L({count:l=1,wrapper:a,className:i,containerClassName:d,containerTestId:m,circle:N=!1,style:g,...p}){var h,r,o;const C=c.useContext(Y),w={...p};for(const[s,t]of Object.entries(p))typeof t>"u"&&delete w[s];const j={...C,...w,circle:N},F={...g,...G(j)};let E="react-loading-skeleton";i&&(E+=` ${i}`);const D=(h=j.inline)!==null&&h!==void 0?h:!1,f=[],y=Math.ceil(l);for(let s=0;s<y;s++){let t=F;if(y>l&&s===y-1){const n=(r=t.width)!==null&&r!==void 0?r:"100%",b=l%1,v=typeof n=="number"?n*b:`calc(${n} * ${b})`;t={...t,width:v}}const u=c.createElement("span",{className:E,style:t,key:s},"â€Œ");D?f.push(u):f.push(c.createElement(c.Fragment,{key:s},u,c.createElement("br",null)))}return c.createElement("span",{className:d,"data-testid":m,"aria-live":"polite","aria-busy":(o=j.enableAnimation)!==null&&o!==void 0?o:P},a?f.map((s,t)=>c.createElement(a,{key:t},s)):f)}const Z=()=>{var E,D,f,y;const l=V(),[a,i]=x.useState(null),[d,m]=x.useState([]),[N,g]=x.useState([]),[p,h]=x.useState(!0),[r,o]=x.useState(!0);x.useEffect(()=>{l===!1&&(window.location.href="/login")},[l]),x.useEffect(()=>{S.get(`${A}/deshboard`).then(s=>{var O,T;const t=s.data.data;i(t);const u=(t==null?void 0:t.CategoryGraph)||[],n=(t==null?void 0:t.departmentPie)||[],b=((O=t==null?void 0:t.CategoryGraph)==null?void 0:O.length)>0?[["Document Type","Number of Files",{role:"style"}],...t.CategoryGraph.map((_,k)=>[_.DOC_TYPE_NAME||"Unknown",Number(_.NO_OF_FILES)||0,["#D9524E","#F77C40","#2BAAE1","#93C54A","#76a7fa"][k%5]])]:[["Document Type","Number of Files",{role:"style"}],["No Data",0,"#ccc"]];m(b),h(u.length===0);const v=(T=t==null?void 0:t.departmentPie)==null?void 0:T.map(_=>[_.DEPT_NAME||"Unknown",Number(_.NO_OF_FILES)||0]);g([["Department","Number of Files"],...v||[]]),o(n.length===0)}).catch(s=>alert(s.message))},[]),console.log(a);const C=(s,t)=>{S.post(`${A}/deshboard/totalViewDownloadCount`,{FILE_ID:s,FILE_NAME:t,VIEW_YN:"Y",DOWNLOAD_YN:"N"})},w={title:"Document Types and File Counts",hAxis:{title:"Document Type",textStyle:{fontName:"Poppins"}},vAxis:{title:"Number of Files",textStyle:{fontName:"Poppins"}},legend:"none",chartArea:{width:"80%",height:"70%"}},j={title:"Files per Department",legend:{position:"right",alignment:"center"}};if(l===!1||!a)return e.jsx("div",{className:"d-flex justify-content-center align-items-center mt-5",children:e.jsx($,{size:"large",tip:"Loading dashboard..."})});const F=[{count:(E=a==null?void 0:a.totalCount)==null?void 0:E.NO_OF_ACTIVE_USERS,label:"Users",color:"#D9524E",icon:"fa-users"},{count:(D=a==null?void 0:a.totalCount)==null?void 0:D.TOT_NO_OF_FILES,label:"Documents",color:"#F77C40",icon:"fa-book"},{count:(f=a==null?void 0:a.totalCount)==null?void 0:f.TOT_NO_OF_VIEW,label:"Views",color:"#2BAAE1",icon:"fa-eye"},{count:(y=a==null?void 0:a.totalCount)==null?void 0:y.TOT_NO_OF_DOWNLOAD,label:"Downloads",color:"#93C54A",icon:"fa-angles-down"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"fw-bold text-gradient",children:"Welcome, Super Admin ðŸ‘‹"}),e.jsx("p",{className:"text-muted",children:"Hereâ€™s a snapshot of your system"})]}),e.jsx("div",{className:"row mb-4",children:F.map((s,t)=>e.jsx("div",{className:"col-sm-6 col-lg-3 mb-3",children:e.jsxs("div",{className:"shadow rounded-2 p-3 text-white position-relative overflow-hidden",style:{background:s.color},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"fw-bold",children:s.count}),e.jsx("p",{className:"mb-0",children:s.label})]}),e.jsx("i",{className:`fa-solid ${s.icon} position-absolute opacity-25`,style:{fontSize:"60px",right:"10px",bottom:"10px"}})]})},t))}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-lg-6 mb-4",children:p?e.jsx(L,{count:5}):e.jsx(I,{chartType:"ColumnChart",width:"100%",height:"350px",data:d,options:w})}),e.jsx("div",{className:"col-lg-6 mb-4",children:r?e.jsx(L,{count:5}):e.jsx(I,{chartType:"PieChart",width:"100%",height:"350px",data:N,options:j})})]}),e.jsx("div",{className:"row",children:[{title:"Recently Added",dataKey:"recentData"},{title:"Most Viewed",dataKey:"mostViewData",badge:"primary"},{title:"Most Download",dataKey:"downloadData",badge:"success"}].map((s,t)=>{var u;return e.jsx("div",{className:"col-lg-4 mb-4",children:e.jsxs("div",{className:"card shadow h-100",children:[e.jsx("div",{className:"card-header fw-bold bg-dark text-white",children:s.title}),e.jsx("div",{className:"card-body p-0",style:{height:"300px",overflowY:"auto"},children:e.jsx("table",{className:"table table-hover m-0",children:e.jsx("tbody",{children:(u=a==null?void 0:a[s.dataKey])==null?void 0:u.map((n,b)=>e.jsxs("tr",{style:{cursor:"pointer"},children:[e.jsx("td",{children:n.FILE_NAME}),s.badge&&e.jsx("td",{className:"px-1",children:e.jsx("span",{className:`badge bg-${s.badge}`,children:n.NO_OF_VIEW})}),e.jsx("td",{className:"px-1",children:e.jsx(M,{title:"View PDF",children:e.jsx("a",{href:`${A}/static/public/image/${n.FILE_PATH}`,target:"_blank",rel:"noreferrer",children:e.jsx(W,{type:"primary",shape:"circle",icon:e.jsx(U,{}),size:"small",onClick:()=>C(n.TRAN_DTL_ID,n.DTLS_FILE_NAME||n.FILE_NAME)})})})})]},b))})})})]})},t)})})]})};export{Z as default};
