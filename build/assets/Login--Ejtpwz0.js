import{r as o,_ as k,R as v,b as S,c as E,P as p,k as R,j as e}from"./index-_KnEI1HH.js";import{C as I,a as h}from"./index.esm-9pdV5KBt.js";import{a as u,b as x}from"./api-4LTkHDOH.js";import{u as P}from"./index.esm-DLMB3cVP.js";import{C,a as g}from"./CRow-CB-1T1wO.js";import{C as T,a as G,b as j,c as f,d as L,e as b}from"./cil-user-D0nrl24l.js";import{c as _,a as U}from"./cil-lock-locked-Bx2O0VsR.js";import"./CFormControlWrapper-Uvpl1t2X.js";var l=o.forwardRef(function(s,c){var n=s.children,i=s.className,r=k(s,["children","className"]);return v.createElement("div",S({className:E("card-group",i)},r,{ref:c}),n)});l.propTypes={children:p.node,className:p.string};l.displayName="CCardGroup";const K=()=>{const[s,c]=o.useState(""),[n,i]=o.useState(""),[r,N]=o.useState({});R();const{register:$,reset:B,formState:{errors:D},handleSubmit:y}=P();o.useEffect(()=>{u.get(`${x}/admistration/companyinfo`).then(a=>{const t=a.data.data[0];N(t)}).catch(a=>{alert(a.message)})},[]);const w=()=>{if(s&&n){const a={username:s,password:n};u({method:"post",url:`${x}/loginCheck`,headers:{"Content-Type":"application/json"},credentials:"include",data:a}).then(t=>{var d,m;t.data.error?alert(t.data.message):(m=(d=t.data)==null?void 0:d.data)!=null&&m.isMatchedPass?(document.cookie=`data = ${t.data.data.token} ; max-age=7200; path=/`,window.location.href="/userdashboard"):alert("Email and password doesn't match")})}else alert("field missing")};return e.jsx("div",{className:"login-bg-background bg-body-tertiary  min-vh-100",children:e.jsx("div",{className:" min-vh-100 d-flex flex-row align-items-center",style:{backgroundColor:"#0000006b"},children:e.jsx(I,{children:e.jsx(C,{className:"justify-content-center",children:e.jsx(g,{md:8,xl:4,sm:12,lg:4,children:e.jsx(l,{children:e.jsx(T,{className:"p-4 text-center",style:{backgroundColor:"rgb(0 0 0 / 6%)"},children:e.jsx(G,{children:e.jsxs("form",{onSubmit:y(w),children:[e.jsx("h1",{className:"text-white",children:r==null?void 0:r.SHORT_NAME}),e.jsx("p",{className:" text-white",children:"Sign In to your account"}),e.jsxs(j,{className:"mb-3",style:{backgroundColor:"#0000006b"},children:[e.jsx(f,{children:e.jsx(h,{icon:L})}),e.jsx(b,{placeholder:"Username",autoComplete:"username",onChange:a=>c(a.target.value)})]}),e.jsxs(j,{className:"mb-4",children:[e.jsx(f,{children:e.jsx(h,{icon:_})}),e.jsx(b,{type:"password",placeholder:"Password",onChange:a=>i(a.target.value),autoComplete:"current-password"})]}),e.jsx(C,{className:"text-center",children:e.jsx(g,{xs:12,children:e.jsx(U,{type:"submit",className:"px-5 bgColor",children:"Login"})})})]})})})})})})})})})};export{K as default};
