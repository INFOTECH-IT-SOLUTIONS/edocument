import{A as T,r as l,j as e}from"./index-BTeMt0bn.js";import{a as h,b as d}from"./api-4LTkHDOH.js";import{C as u}from"./index-B6O0b9K5.js";import{B as I}from"./button-TQMUHxtX.js";import{R as L}from"./FilePdfOutlined-Ckvf7fcD.js";import"./AntdIcon-C60h6qUe.js";import"./compact-item-BhS0uAM4.js";const K=()=>{var p,x,m,N;const n=T();l.useState({});const[s,f]=l.useState(null),[b,g]=l.useState([]),[j,_]=l.useState([]),[E,y]=l.useState(!0),[D,C]=l.useState(!0);l.useEffect(()=>{n===!1&&(window.location.href="/login")},[n]),console.log(n),l.useEffect(()=>{h.get(`${d}/deshboard`).then(a=>f(a.data.data)).catch(a=>alert(a.message))},[]),l.useEffect(()=>{(async()=>{var o,c;try{const r=(await h.get(`${d}/deshboardChart`)).data.data,O=[["Document Type","Number of Files",{role:"style"}],...((o=r==null?void 0:r.CategoryGraph)==null?void 0:o.map((i,S)=>[i.DOC_TYPE_NAME,i.NO_OF_FILES,["#D9524E","#F77C40","#2BAAE1","#93C54A","#76a7fa"][S%5]]))||[]];g(O),y(!1);const v=(c=r==null?void 0:r.departmentPie)==null?void 0:c.map(i=>[i.DEPT_NAME,i.NO_OF_FILES]);_([["Department","Number of Files"],...v||[]]),C(!1)}catch(t){alert(t.message)}})()},[]);const w=(a,o)=>{h.post(`${d}/deshboard/totalViewDownloadCount`,{FILE_ID:a,FILE_NAME:o,VIEW_YN:"Y",DOWNLOAD_YN:"N"})},A={title:"Document Types and File Counts",hAxis:{title:"Document Type",textStyle:{fontName:"Poppins"}},vAxis:{title:"Number of Files",textStyle:{fontName:"Poppins"}},legend:"none",chartArea:{width:"80%",height:"70%"}},F={title:"Files per Department",legend:{position:"right",alignment:"center"}};return n===!1||!s?e.jsx("div",{className:"spinner-border mt-4",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("h5",{className:"text-primary",children:"Hello Super Admin !!"})}),e.jsx("div",{className:"row",children:[{count:(p=s==null?void 0:s.totalCount)==null?void 0:p.NO_OF_ACTIVE_USERS,label:"Users",color:"#D9524E",icon:"fa-users"},{count:(x=s==null?void 0:s.totalCount)==null?void 0:x.TOT_NO_OF_FILES,label:"Documents",color:"#F77C40",icon:"fa-book"},{count:(m=s==null?void 0:s.totalCount)==null?void 0:m.TOT_NO_OF_VIEW,label:"Views",color:"#2BAAE1",icon:"fa-eye"},{count:(N=s==null?void 0:s.totalCount)==null?void 0:N.TOT_NO_OF_DOWNLOAD,label:"Downloads",color:"#93C54A",icon:"fa-angles-down"}].map((a,o)=>e.jsx("div",{className:"col-sm-12 col-lg-3",children:e.jsx("div",{className:"card mb-3 py-3 card-hover-effect",style:{background:a.color,cursor:"pointer",boxShadow:"6px 6px 10px -1px rgba(0,0,0,0.15), -6px -6px 10px -1px rgba(255,255,255,0.7)"},children:e.jsxs("div",{className:"row g-0",children:[e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title font-weight-bold text-white",children:a.count}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-white",children:a.label})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx("i",{className:`fa-solid ${a.icon} pt-4 text-white`,style:{fontSize:"50px",opacity:"0.5"}})})]})})},o))}),e.jsxs("div",{className:"row py-3",children:[e.jsx("div",{className:"col-sm-12 col-lg-6",children:E?e.jsx("div",{className:"spinner-border mt-4",role:"status"}):e.jsx(u,{chartType:"ColumnChart",width:"100%",height:"350px",data:b,options:A})}),e.jsx("div",{className:"col-sm-12 col-lg-6",children:D?e.jsx("div",{className:"spinner-border mt-4",role:"status"}):e.jsx(u,{chartType:"PieChart",width:"100%",height:"350px",data:j,options:F})})]}),e.jsx("div",{className:"row",children:[{title:"Recently Added",dataKey:"recentData"},{title:"Most Viewed",dataKey:"mostViewData",badge:"primary"},{title:"Most Download",dataKey:"downloadData",badge:"success"}].map((a,o)=>{var c;return e.jsx("div",{className:"col-sm-12 col-lg-4",children:e.jsxs("div",{className:"card mb-3",style:{boxShadow:"6px 6px 10px -1px rgba(0,0,0,0.15), -6px -6px 10px -1px rgba(255,255,255,0.7)"},children:[e.jsx("h6",{className:"dark_bg text-white p-2",children:a.title}),e.jsx("table",{className:"table table-hover",children:e.jsx("tbody",{children:(c=s==null?void 0:s[a.dataKey])==null?void 0:c.map((t,r)=>e.jsxs("tr",{style:{cursor:"pointer"},children:[e.jsx("td",{children:t.FILE_NAME}),a.badge&&e.jsx("td",{className:"px-0",children:e.jsx("span",{className:`badge bg-${a.badge}`,children:t.NO_OF_VIEW})}),e.jsx("td",{className:"px-0",children:e.jsx("a",{href:`${d}/static/public/image/${t.FILE_PATH}`,target:"_blank",rel:"noreferrer",children:e.jsx(I,{className:"fs-6 bg-danger",icon:e.jsx(L,{}),size:"small",style:{color:"#fff",fontSize:"5px"},onClick:()=>w(t.TRAN_DTL_ID,t.DTLS_FILE_NAME||t.FILE_NAME)})})})]},r))})})]})},o)})})]})};export{K as default};
